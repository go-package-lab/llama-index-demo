# llama-index-demo

# 将图片批量向量化，然后写入es，通过ES查询匹配的图片

# 搜索 长城
```shell
curl --request POST \
  --url http://localhost:9200/image_index/_search \
  --header 'Accept: */*' \
  --header 'Accept-Encoding: gzip, deflate, br' \
  --header 'Connection: keep-alive' \
  --header 'Content-Type: application/json' \
  --header 'User-Agent: PostmanRuntime-ApipostRuntime/1.1.0' \
  --data '{
    "min_score": 0.63,
    "knn": {
        "field": "vector",
        "query_vector": [
      -5.141660198569297791e-02,-2.525380998849868774e-02,-8.475901558995246887e-03,-1.958109624683856964e-02,-1.016916055232286453e-02,-3.906169161200523376e-02,-1.570982299745082855e-02,-2.463777735829353333e-02,1.566966250538825989e-02,-1.648971997201442719e-02,3.026218526065349579e-02,1.840975880622863770e-02,5.799795314669609070e-02,-2.346731349825859070e-02,4.292178899049758911e-02,3.418359532952308655e-02,-4.695301502943038940e-02,-3.667186200618743896e-02,-1.087526977062225342e-02,1.283991895616054535e-02,-1.896668784320354462e-02,-6.088638678193092346e-02,-3.915851563215255737e-02,-3.532058617565780878e-04,-5.001707375049591064e-02,1.249659340828657150e-02,1.073652412742376328e-02,-6.805680226534605026e-03,-4.077901691198348999e-02,-4.752745106816291809e-02,-3.811074048280715942e-02,-1.304310746490955353e-02,3.070629667490720749e-03,3.340630233287811279e-02,-3.732253238558769226e-02,1.432084757834672928e-02,-5.256346613168716431e-02,2.129281498491764069e-02,-1.241162978112697601e-02,1.545996963977813721e-02,-3.612481430172920227e-02,-9.042456746101379395e-03,-1.083483546972274780e-02,1.367394626140594482e-02,3.187590278685092926e-03,-3.901164513081312180e-03,-5.111899226903915405e-04,2.520672045648097992e-03,2.515904605388641357e-02,-1.976887695491313934e-02,1.177305448800325394e-02,4.371410759631544352e-04,-1.892531290650367737e-02,9.219118393957614899e-03,1.358781382441520691e-02,-5.342818796634674072e-02,2.356305252760648727e-03,-2.537660673260688782e-02,-1.610200293362140656e-02,-8.559200167655944824e-02,1.226228754967451096e-02,1.365913543850183487e-02,-2.634078636765480042e-02,6.093993782997131348e-02,-9.026364423334598541e-03,-1.314764935523271561e-02,-1.564603112637996674e-02,2.150752115994691849e-03,-3.623935952782630920e-02,-2.816237695515155792e-02,-1.901320181787014008e-02,1.207884587347507477e-02,7.649429887533187866e-02,-4.501975327730178833e-02,3.570722416043281555e-02,4.584434907883405685e-03,4.210630059242248535e-02,-1.548849139362573624e-02,1.752568222582340240e-02,-2.267552725970745087e-02,-2.051536459475755692e-03,2.663128543645143509e-03,1.885836198925971985e-02,4.350018873810768127e-02,-8.041584491729736328e-02,3.504647174850106239e-03,-2.572569996118545532e-02,-1.695363782346248627e-02,-1.273471396416425705e-02,-6.889097392559051514e-03,1.850938610732555389e-02,-2.050603367388248444e-02,-2.236059866845607758e-03,-3.631749888882040977e-03,-3.615112509578466415e-04,3.055214509367942810e-02,-3.299821540713310242e-02,-2.946701645851135254e-02,4.064454510807991028e-02,3.129490418359637260e-03,-3.878241777420043945e-02,8.225377649068832397e-03,3.795932047069072723e-03,3.053327091038227081e-02,2.560060098767280579e-02,-4.042065888643264771e-02,5.666478350758552551e-02,-2.530113607645034790e-02,-3.061427548527717590e-02,-3.976643830537796021e-02,-1.195187959820032120e-02,-3.194121643900871277e-03,1.099986210465431213e-01,-1.703906990587711334e-02,-2.056974917650222778e-02,-9.234610944986343384e-03,-3.198791667819023132e-02,5.702363327145576477e-03,3.461807966232299805e-02,4.228188097476959229e-02,-1.964486390352249146e-02,-8.963861502707004547e-03,-3.735485300421714783e-02,7.880290970206260681e-03,2.327460423111915588e-02,6.377921253442764282e-02,-6.371917575597763062e-02,-1.929164864122867584e-03,-6.400622427463531494e-02,-2.802542038261890411e-02,-2.530132979154586792e-02,-2.548393420875072479e-02,3.441958129405975342e-02,2.992436476051807404e-02,-8.758321404457092285e-03,4.135187342762947083e-02,-2.844935841858386993e-02,1.286012399941682816e-02,-5.690077319741249084e-02,-2.713456377387046814e-02,1.962954178452491760e-02,-3.019455354660749435e-03,2.171694487333297729e-02,-4.299070686101913452e-02,-1.436226535588502884e-02,6.993643939495086670e-02,-7.305656094104051590e-03,1.697505451738834381e-02,-6.432229280471801758e-02,-1.834377832710742950e-02,-3.869077935814857483e-02,2.375186234712600708e-02,-3.488238900899887085e-02,-1.975173689424991608e-02,4.085375741124153137e-02,1.995494775474071503e-02,-1.141380425542593002e-02,-3.170831874012947083e-02,-2.649621665477752686e-02,5.733354762196540833e-02,1.866918243467807770e-02,6.849864870309829712e-02,3.151634708046913147e-02,1.313291024416685104e-02,-4.386753961443901062e-02,-3.678932040929794312e-02,-6.418108008801937103e-03,-1.400858070701360703e-02,3.549671266227960587e-03,-1.716217771172523499e-02,2.697895281016826630e-02,-6.204458768479526043e-04,5.090185441076755524e-03,5.201301351189613342e-02,2.242233417928218842e-02,1.259939465671777725e-02,-1.622167043387889862e-02,-9.744547307491302490e-03,1.371202152222394943e-02,2.879133448004722595e-02,-1.114212200045585632e-01,-3.999469801783561707e-02,2.226153202354907990e-02,-9.396520443260669708e-03,1.002275757491588593e-02,-7.212030887603759766e-02,-6.883270293474197388e-02,1.500989962369203568e-02,-3.160497918725013733e-02,-8.079315535724163055e-03,3.041565231978893280e-02,-4.360811784863471985e-03,4.881163313984870911e-02,-6.564849615097045898e-02,4.652663692831993103e-02,2.464457415044307709e-02,7.113255560398101807e-02,-2.199403196573257446e-02,-3.072989545762538910e-02,-4.663202911615371704e-03,-9.552644565701484680e-03,-6.648938637226819992e-03,-2.975924126803874969e-02,2.444975264370441437e-02,5.558257922530174255e-03,-1.326400786638259888e-02,-5.577512457966804504e-02,-1.787115004844963551e-03,-1.309132389724254608e-02,3.765430301427841187e-02,7.344535551965236664e-04,-3.214363381266593933e-02,-2.617444656789302826e-02,-5.016786744818091393e-04,3.244437277317047119e-02,-2.349979244172573090e-02,-3.739034757018089294e-02,7.213185727596282959e-02,-2.807712182402610779e-03,-2.816955558955669403e-02,4.153391718864440918e-02,-2.673456445336341858e-02,4.178493469953536987e-02,3.928127139806747437e-02,-2.042938768863677979e-02,-6.872122734785079956e-02,-1.730548404157161713e-02,-1.549478713423013687e-02,-1.603608578443527222e-02,1.227252185344696045e-02,2.566472254693508148e-02,4.462258145213127136e-02,-1.017951406538486481e-02,-3.703298419713973999e-02,8.971943706274032593e-02,1.481916755437850952e-02,1.713580079376697540e-02,-1.650299504399299622e-02,6.343593820929527283e-03,-3.767726942896842957e-02,8.992561139166355133e-03,-1.808616518974304199e-02,7.026395946741104126e-02,1.595014706254005432e-02,8.194192312657833099e-03,8.406017720699310303e-02,-1.739173568785190582e-02,-5.567385815083980560e-03,-3.215228021144866943e-02,2.199157886207103729e-02,3.272594884037971497e-02,-3.336023539304733276e-02,3.434601426124572754e-02,1.860755495727062225e-02,-2.355942688882350922e-02,1.666999608278274536e-02,2.696325629949569702e-02,-1.117803039960563183e-04,2.196338959038257599e-02,-5.701889842748641968e-02,1.406408380717039108e-02,8.350409334525465965e-04,7.421589456498622894e-03,1.555298804305493832e-03,1.551889441907405853e-02,-3.828857326880097389e-03,1.757167652249336243e-02,-6.314647197723388672e-02,2.018174901604652405e-02,2.447525970637798309e-02,5.631489306688308716e-02,-2.274228259921073914e-02,-3.460909053683280945e-02,1.088411081582307816e-02,-1.238950900733470917e-02,-1.867260597646236420e-02,-1.713115535676479340e-02,1.038496289402246475e-02,3.315178304910659790e-02,-2.288231812417507172e-02,2.023065835237503052e-02,-6.563781201839447021e-02,-6.431964784860610962e-02,-5.431101657450199127e-03,1.166371535509824753e-02,-3.237616270780563354e-02,-8.824492688290774822e-04,3.265173407271504402e-03,-1.153634414076805115e-01,-1.036912426352500916e-01,2.560765482485294342e-02,3.971920534968376160e-02,-1.713172160089015961e-02,3.032975271344184875e-02,-5.258579179644584656e-02,7.097918540239334106e-02,3.994826693087816238e-03,-1.008256897330284119e-02,-4.461762495338916779e-03,6.292058527469635010e-02,-1.384357362985610962e-02,2.081784792244434357e-02,7.196481805294752121e-03,-1.393625326454639435e-02,-8.526647835969924927e-02,2.204716950654983521e-02,2.424069121479988098e-02,4.977553337812423706e-02,-1.416939031332731247e-02,1.315045356750488281e-02,2.278006076812744141e-02,4.631700925529003143e-03,1.708951406180858612e-02,1.998570375144481659e-02,7.060354255372658372e-05,3.637157008051872253e-02,-2.325971573591232300e-01,-3.828209638595581055e-02,-4.046032205224037170e-02,-1.810696907341480255e-02,-7.394479587674140930e-03,-4.031649976968765259e-02,5.710517987608909607e-02,-3.720678761601448059e-02,-6.100869923830032349e-02,4.755528643727302551e-02,-1.799291931092739105e-02,9.013020247220993042e-02,-2.607017057016491890e-03,3.145232424139976501e-02,9.077141992747783661e-03,2.531391754746437073e-02,7.672833278775215149e-03,1.878460496664047241e-02,3.221124783158302307e-02,5.990342237055301666e-03,-2.505393698811531067e-02,-4.741024598479270935e-02,5.909761786460876465e-02,4.055663943290710449e-02,-6.647992413491010666e-03,1.472172141075134277e-02,-3.258169814944267273e-02,1.259916182607412338e-02,9.138097986578941345e-03,-2.942926250398159027e-02,4.015971720218658447e-02,-1.500214356929063797e-02,-1.779639534652233124e-02,-1.427706010872498155e-04,-2.314603189006447792e-03,-5.487998016178607941e-03,3.255091980099678040e-02,-3.919847309589385986e-02,-2.258631587028503418e-02,4.668635316193103790e-03,-2.924277074635028839e-02,1.561662415042519569e-03,4.837066680192947388e-02,-7.967409677803516388e-03,-8.591176941990852356e-03,5.140688270330429077e-02,-4.599182400852441788e-03,-7.300260663032531738e-02,3.167908638715744019e-02,1.855279505252838135e-02,-3.387905657291412354e-02,3.374430537223815918e-02,2.457508444786071777e-02,2.040345966815948486e-02,-1.728932745754718781e-02,5.341822281479835510e-03,-2.843520790338516235e-02,-3.022030368447303772e-02,-6.137840915471315384e-03,-5.700809881091117859e-03,-1.530149113386869431e-02,3.724066168069839478e-02,-5.767881125211715698e-02,1.233881060034036636e-02,4.543036222457885742e-02,-3.377659246325492859e-02,2.306609228253364563e-02,-7.047631591558456421e-02,-9.088336490094661713e-03,-4.180391877889633179e-02,-1.466139405965805054e-02,-4.496394470334053040e-02,1.167515106499195099e-02,-2.618912234902381897e-02,-2.267586626112461090e-02,-2.115991665050387383e-03,-1.525955274701118469e-02,1.421425957232713699e-02,-3.630727296695113182e-03,1.800196361728012562e-03,-1.912593841552734375e-02,1.382290665060281754e-02,3.193296492099761963e-02,1.617141067981719971e-02,4.156637564301490784e-02,-1.454206276684999466e-02,9.229865856468677521e-03,-5.400569643825292587e-03,-8.790560066699981689e-02,-3.101293556392192841e-02,1.319818664342164993e-02,-8.092570118606090546e-03,-3.084611333906650543e-02,-2.023430913686752319e-02,1.865918561816215515e-02,5.851902067661285400e-02,-3.322377055883407593e-02,-9.817896783351898193e-02,-1.202411483973264694e-02,3.078420832753181458e-02,-9.426626376807689667e-03,-1.795465312898159027e-02,-5.021288059651851654e-03,3.438585251569747925e-02,5.571397021412849426e-03,2.552552148699760437e-02,1.188121922314167023e-02,5.067621916532516479e-02,-1.524213515222072601e-02,-1.212787255644798279e-02,6.600555032491683960e-03,-2.200582996010780334e-02,-8.515203371644020081e-03,1.639611274003982544e-02,1.367379538714885712e-02,3.530472889542579651e-02,8.140545338392257690e-03,-2.614235877990722656e-02,-5.794710014015436172e-03,1.974728889763355255e-02,4.099856317043304443e-02,-7.057625055313110352e-02,-6.347746402025222778e-02,2.131484635174274445e-02,2.507165670394897461e-01,1.137451082468032837e-02,-4.452055320143699646e-02,2.036826685070991516e-02,-8.373053371906280518e-02,4.698023945093154907e-02,-2.513458952307701111e-02,-7.211776915937662125e-03,4.246016964316368103e-02,-2.073074504733085632e-02,-4.176356596872210503e-04,3.409925848245620728e-02,3.122343681752681732e-02,5.977796763181686401e-02,-3.758240118622779846e-02,-1.773420721292495728e-02,6.252895575016736984e-03,7.643082737922668457e-02,2.119109407067298889e-02,3.406623005867004395e-02,3.314997255802154541e-02,-7.749233394861221313e-02,4.325640201568603516e-02,-3.410852700471878052e-02,2.522781118750572205e-02,-2.534413151443004608e-02,-1.682318560779094696e-02,5.077860318124294281e-03,4.422247409820556641e-03,-8.501204662024974823e-03,-7.447626441717147827e-03,9.296493604779243469e-03,1.859948155470192432e-03,1.726459525525569916e-02,5.417285952717065811e-03,2.728576213121414185e-02,-5.185915529727935791e-02,-4.598179832100868225e-02,1.865439116954803467e-02,4.199674725532531738e-02,1.078979671001434326e-02,-2.167041040956974030e-02,-6.673554424196481705e-03,3.721138834953308105e-02,-5.627560894936323166e-03,-2.844966948032379150e-02,4.840584099292755127e-02,4.294746741652488708e-02,-4.265441000461578369e-02,2.372278459370136261e-02,8.517928421497344971e-02,2.842583879828453064e-02,1.541470736265182495e-02,-1.316819153726100922e-02,4.170744679868221283e-03,-3.049755841493606567e-02,-4.043616726994514465e-02,3.109222650527954102e-02,-1.871127448976039886e-02,-1.736536063253879547e-02,2.265650220215320587e-02,-8.828892372548580170e-03,3.241679444909095764e-02,4.550623893737792969e-02,-2.240505814552307129e-02,-3.516338393092155457e-02,-9.013734012842178345e-02,-4.353374615311622620e-02,3.969429805874824524e-02,3.191139921545982361e-02,1.185212098062038422e-02,-3.730314970016479492e-02,-3.105965629220008850e-02,2.014360949397087097e-02,1.223214156925678253e-02,1.341081690043210983e-02,3.538598120212554932e-02,1.994048245251178741e-02,-2.653960324823856354e-02,-1.578734628856182098e-02,2.416880987584590912e-02,3.205333603546023369e-03,1.082983333617448807e-02,-5.266844294965267181e-03,6.636202451772987843e-04,-4.062294587492942810e-02,-1.529278513044118881e-02,-1.450054068118333817e-02,-1.690114289522171021e-02,-1.315413974225521088e-03,-3.814995661377906799e-02,-2.278003841638565063e-02,1.855522394180297852e-02,2.970210090279579163e-02,-3.229257836937904358e-02,-2.167196199297904968e-02,-1.785920932888984680e-02,-1.569566689431667328e-02,3.773162141442298889e-02,-1.423576939851045609e-02,5.537561140954494476e-03,-6.964677013456821442e-03,3.801885247230529785e-02,-1.229107961989939213e-03,3.373492509126663208e-02,8.295686915516853333e-03,-5.799356102943420410e-02,-2.957041747868061066e-02,3.768763318657875061e-02,-3.025087714195251465e-02,-1.536419615149497986e-03,3.313323482871055603e-02,4.440883547067642212e-02,-2.265176363289356232e-02,-1.310536451637744904e-02,7.318105548620223999e-03,-2.437774650752544403e-02,-2.516892738640308380e-03,5.961373075842857361e-02,3.250230103731155396e-02,-3.925305232405662537e-02,-5.041437596082687378e-02,3.502611443400382996e-02,2.360348403453826904e-02,-9.442752343602478504e-04,4.452394321560859680e-02,1.088020950555801392e-01,3.832523152232170105e-02,-4.773326218128204346e-03,-1.907505793496966362e-03,1.553440932184457779e-02,-2.225898392498493195e-02,-2.086129039525985718e-02,-8.724581450223922729e-03,1.815554872155189514e-02,2.067869901657104492e-02,-2.414028160274028778e-02,1.224562246352434158e-02,-2.611414715647697449e-02,4.902945831418037415e-03,-7.721443194895982742e-03,1.795119792222976685e-02,-8.665346540510654449e-03,1.037344615906476974e-02,-1.155477110296487808e-02,-4.893228411674499512e-02,-2.181496471166610718e-02,-3.795845899730920792e-03,-7.078903913497924805e-02,2.942964248359203339e-02,-1.465416885912418365e-02,1.984832994639873505e-02,-4.315408691763877869e-02,-2.776821842417120934e-03,3.116914071142673492e-02,-4.463637992739677429e-02,2.746236044913530350e-03,5.223467014729976654e-03,2.675455063581466675e-02,1.532697118818759918e-02,-1.453329063951969147e-02,-7.908033579587936401e-02,2.922247909009456635e-02,-4.727910459041595459e-02,-9.103167057037353516e-02,-1.116952225565910339e-01,4.151330888271331787e-02,-4.038757644593715668e-03,4.689245298504829407e-02,5.576462484896183014e-03,1.872416213154792786e-02,-1.335620786994695663e-02,-5.947712436318397522e-02,-2.560046128928661346e-02,5.154244974255561829e-02,7.430716603994369507e-02,8.212516456842422485e-02,-3.033938445150852203e-02,-1.482040807604789734e-02,4.262330010533332825e-02,-4.268589429557323456e-03,2.004412189126014709e-02,6.920224521309137344e-03,4.607705026865005493e-02,-8.153773844242095947e-02,4.380305483937263489e-02,3.359179943799972534e-02,-2.211012132465839386e-02,-1.187629438936710358e-02,5.320115387439727783e-02,2.639779075980186462e-02,2.380223572254180908e-02,-1.065756939351558685e-02,-1.283103413879871368e-02,1.087090093642473221e-02,1.709821447730064392e-02,1.533471979200839996e-02,7.849355228245258331e-03,-3.549775108695030212e-02,1.062011625617742538e-02,4.531877115368843079e-03,1.356109324842691422e-02,3.563051298260688782e-02,-3.524374216794967651e-02,1.151353642344474792e-01,-2.911478281021118164e-02,-6.226834375411272049e-03,-4.368405416607856750e-02,2.373065613210201263e-02,-5.207524448633193970e-02,-1.090503856539726257e-02,6.709314137697219849e-02,-4.627516027539968491e-03,2.811252512037754059e-02,-2.699876390397548676e-02,-1.920425100252032280e-03,-2.473073638975620270e-02,4.283371567726135254e-02,-6.154382601380348206e-02,-4.020370170474052429e-02,-5.931905657052993774e-02,2.111120149493217468e-02,-6.996118463575839996e-03,-2.282364480197429657e-02,7.666917052119970322e-03,3.065948747098445892e-02,5.605186149477958679e-02,-2.397387055680155754e-03,2.431127801537513733e-02,-3.338872641324996948e-02,-9.439653716981410980e-03,2.045847848057746887e-02,7.565163541585206985e-03,1.604111306369304657e-02,5.894567351788282394e-03,-3.132081776857376099e-02,-8.547997102141380310e-03,-5.403046682476997375e-02,-1.872751116752624512e-02,-3.343806043267250061e-02,-3.420200571417808533e-02,9.515350684523582458e-03,-2.507034316658973694e-02,4.700542613863945007e-02,-1.942608738318085670e-03,-8.795479312539100647e-03,-5.654629319906234741e-02,2.021936513483524323e-02,-2.276415762025862932e-04,-3.588756173849105835e-02,-2.942444756627082825e-02,-4.457258060574531555e-02,-2.424024045467376709e-03,2.801257185637950897e-02,8.915259689092636108e-02,3.248946368694305420e-02,2.082567662000656128e-02,2.069071633741259575e-03,4.423589631915092468e-02,1.138673722743988037e-02,-3.180618584156036377e-02,1.899134181439876556e-02,2.378163114190101624e-02,-3.509418573230504990e-03,-1.423274446278810501e-02,1.269728038460016251e-02,3.880454599857330322e-02,-4.092615470290184021e-02,3.466013818979263306e-02,6.540517508983612061e-02,8.183417841792106628e-03,-4.699907265603542328e-03,-6.939664948731660843e-03,3.396654501557350159e-02,-8.526100777089595795e-03,-3.596894070506095886e-02,-1.025978662073612213e-02,-2.866331674158573151e-02,1.418867520987987518e-02,-2.089237049221992493e-02,-3.878276422619819641e-02,2.812739461660385132e-03,2.623274177312850952e-02,3.900835057720541954e-03,-8.832869119942188263e-03,-1.989515125751495361e-02,-1.022716891020536423e-02,1.193692162632942200e-02,-3.721047425642609596e-03,-3.187348693609237671e-02,-3.771273791790008545e-02,-4.752578586339950562e-02,2.123204432427883148e-02,-2.643821202218532562e-02,2.341406652703881264e-03,2.533264830708503723e-02,-3.658726438879966736e-02,6.066016480326652527e-02,-2.028235048055648804e-02,-7.266052067279815674e-02,4.798722639679908752e-02,1.080153137445449829e-02,-2.777367830276489258e-03,-1.913393847644329071e-03,4.542167484760284424e-02,9.954115375876426697e-03,4.084300622344017029e-02,-3.440210595726966858e-02,-1.891966536641120911e-02,-1.468259282410144806e-02,1.426778640598058701e-02,-6.893409788608551025e-02,-5.569081753492355347e-03,-2.189331222325563431e-03,3.345674648880958557e-02,1.724677276797592640e-03,1.542164944112300873e-02,-8.535945415496826172e-02,1.313377078622579575e-02,2.264365926384925842e-02,7.178021967411041260e-02,1.945271855220198631e-03,2.740074694156646729e-02,2.330549806356430054e-02,-1.159065030515193939e-02,-2.732269838452339172e-02,2.545611746609210968e-02,-1.499282894656062126e-03


        ],
        "k": 3,
        "num_candidates": 10
    },
    "size": 5,
    "_source": [
        "title",
        "content"
    ]
}'
```